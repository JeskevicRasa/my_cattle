<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cattle info</title>
</head>
<body>
<style>
table, th, td {
  border:1px solid black;
}
</style>
<h1> Cattle info </h1>

<a href="{% url 'my_farm:add_row' %}">Add cattle information</a>
<form id="column-form">
    {% csrf_token %}
    <label for="id_type">Type</label>
    <input type="checkbox" name="columns" value="type" id="id_type" checked>
    <label for="id_number">Number</label>
    <input type="checkbox" name="columns" value="number" id="id_number" checked>
    <label for="id_name">Name</label>
    <input type="checkbox" name="columns" value="name" id="id_name" checked>
    <label for="id_gender">Gender</label>
    <input type="checkbox" name="columns" value="gender" id="id_gender" checked>
    <label for="id_breed">Breed</label>
    <input type="checkbox" name="columns" value="breed" id="id_breed" checked>
    <label for="id_birth_date">Birth Date</label>
    <input type="checkbox" name="columns" value="birth_date" id="id_birth_date" checked>
    <label for="id_entry_date">Entry date</label>
    <input type="checkbox" name="columns" value="entry_date" id="id_entry_date" checked>
    <label for="id_end_date">End date</label>
    <input type="checkbox" name="columns" value="end_date" id="id_end_date" checked>
    <label for="id_comments">Comments</label>
    <input type="checkbox" name="columns" value="comments" id="id_comments" checked>
    <button type="submit">Apply</button>
</form>
  <table id="cattle-table" style="width:80%">
      <thead>
        <tr style="background-color:6F625F;">
          <th class="cattle-type">Type</th>
          <th class="cattle-number">Number</th>
          <th class="cattle-name">Name</th>
          <th class="cattle-gender">Gender</th>
          <th class="cattle-breed">Breed</th>
          <th class="cattle-birth_date">Birth date</th>
          <th class="cattle-entry_date">Entry date</th>
          <th class="cattle-end_date">End date</th>
          <th class="cattle-comments">Comments</th>
          <th>Actions</th>
        </tr>
      </thead>
    <tbody>
    {% for cow in cattle %}
        <tr>
          <td class="cattle-type">{{ cow.type }}</td>
          <td class="cattle-number">{{ cow.number }}</td>
          <td class="cattle-name">{{ cow.name }}</td>
          <td class="cattle-gender">{{ cow.gender }}</td>
          <td class="cattle-breed">{{ cow.breed }}</td>
          <td class="cattle-birth_date">{{ cow.birth_date|date:"Y-m-d" }}</td>
          <td class="cattle-entry_date">{{ cow.entry_date|date:"Y-m-d" }}</td>
          <td class="cattle-end_date">{{ cow.end_date|date:"Y-m-d" }}</td>
          <td class="cattle-comments">{{ cow.comments }}</td>
          <td>
            <a href="{% url 'my_farm:delete_row' cow.id %}">Delete</a>
          </td>
        </tr>
    {% endfor %}
    </tbody>
  </table>

{% block scripts %}
  <script>
    const form = document.querySelector('#column-form');
    const table = document.querySelector('#cattle-table');
    const columns = Array.from(document.querySelectorAll('[name="columns"]'));

    // Show/hide columns based on user selection
    form.addEventListener('submit', (event) => {
      event.preventDefault();
      columns.forEach((column) => {
        const columnName = column.value;
        const columnCells = Array.from(table.querySelectorAll(`.cattle-${columnName}`));
        columnCells.forEach((cell) => {
          cell.style.display = column.checked ? '' : 'none';
        });
      });
    });
  </script>
{% endblock %}
</body>
</html>